I"Ö!<h4 id="mahonyahrsç®—æ³•çš„å®ç°">MahonyAHRSç®—æ³•çš„å®ç°</h4>

<h5 id="ç›®æ ‡">ç›®æ ‡</h5>

<ul>
  <li>è§‚å¯Ÿç¨‹åºä¸­å¤„ç†æ—¶é—´çš„æ–¹æ³•</li>
  <li>è®­ç»ƒå†™C++çš„èƒ½åŠ›</li>
</ul>

<h5 id="eigen">eigen</h5>

<pre><code class="language-C++">Eigen::Quaterniond q1 = Eigen::Quaterniond (0.1,0.2,0.1,0.3).normalized();  //å®šä¹‰ä¸€ä¸ªå››å…ƒæ•°å¹¶ç”¨normalizedï¼ˆï¼‰å½’ä¸€åŒ–
</code></pre>

<h5 id="å‡ºç°çš„é—®é¢˜">å‡ºç°çš„é—®é¢˜</h5>

<p><span style="color:green;"><strong>å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæµç¨‹æ²¡æœ‰æŒæ¡å¥½ï¼Œå¯¹å‡½æ•°çš„ç†Ÿæ‚‰ç¨‹åº¦ä¹Ÿå¾ˆä½ã€‚æ‰€ä»¥é€ æˆäº†æ— æ³•å®šä½è¯¯å·®çš„ç»“æœã€‚åˆ©ç”¨matlabçš„çŸ©é˜µæ–¹æ³•æ±‚è§£ï¼Œæ˜æ˜¾æ•ˆç‡æ˜¯æ›´é«˜çš„ã€‚</strong></span></p>

<p><span style="color:green;"><strong>æœ€åå‡ºç°NANçš„é”™è¯¯ï¼Œæ‰¾ä¸åˆ°é—®é¢˜åœ¨å“ªé‡Œï¼Œå†³å®šçœ‹ä¸€ä¸‹ä½œè€…æœ¬æ¥çš„ç¨‹åº</strong></span>ã€‚</p>

<h5 id="vscodeçš„é…ç½®">vscodeçš„é…ç½®</h5>

<ul>
  <li>
    <p>https://blog.csdn.net/weixin_43374723/article/details/84064644</p>
  </li>
  <li>
    <p>vscode<a href="https://zhuanlan.zhihu.com/p/93239107">è¿œç¨‹å¼€å‘</a>ï¼›</p>
  </li>
</ul>

<h4 id="eskfç¨‹åºçš„ç†Ÿæ‚‰">ESKFç¨‹åºçš„ç†Ÿæ‚‰</h4>

<p>ç¨‹åºè®¾è®¡ä¸­çš„ä¸€äº›åšæ³•ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">constexpr</span> <span class="n">ç›¸å½“äºconst</span>
</code></pre></div></div>

<p>åœ¨ä¸‹é¢çš„å®šä¹‰ä¸­ï¼Œå¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢é‡å¤å®šä¹‰çš„é—®é¢˜ï¼Œå°±æ–¹ä¾¿äº†å¾ˆå¤šã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#pragma once
#include &lt;Eigen/Core&gt;
#include &lt;Eigen/Dense&gt;
</span>
<span class="n">namespace</span> <span class="n">OriEst</span><span class="p">{</span>
    
  <span class="n">constexpr</span>  <span class="n">double</span> <span class="n">kDeg2Rad</span> <span class="o">=</span> <span class="n">M_PI</span> <span class="o">/</span> <span class="mf">180.</span><span class="p">;</span>
<span class="n">constexpr</span> <span class="n">double</span> <span class="n">kRad2Deg</span> <span class="o">=</span> <span class="mf">180.</span> <span class="o">/</span> <span class="n">M_PI</span><span class="p">;</span>
<span class="n">constexpr</span> <span class="n">double</span> <span class="n">kGravity</span> <span class="o">=</span> <span class="mf">9.8</span><span class="p">;</span>
<span class="n">inline</span> <span class="n">Eigen</span><span class="p">::</span><span class="n">Matrix3d</span> <span class="n">SkewMat</span><span class="p">(</span><span class="n">const</span> <span class="n">Eigen</span><span class="p">::</span><span class="n">Vector3d</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Eigen</span><span class="p">::</span><span class="n">Matrix3d</span> <span class="n">w</span><span class="p">;</span>
    <span class="n">w</span> <span class="o">&lt;&lt;</span>  <span class="mf">0.</span><span class="p">,</span>   <span class="o">-</span><span class="n">v</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>  <span class="n">v</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
          <span class="n">v</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>  <span class="mf">0.</span><span class="p">,</span>   <span class="o">-</span><span class="n">v</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
         <span class="o">-</span><span class="n">v</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>  <span class="n">v</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>  <span class="mf">0.</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">w</span><span class="p">;</span>
<span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>åº”å¯¹å¦‚æ­¤æŠ¥é”™ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<h5 id="æ™ºèƒ½æŒ‡é’ˆçš„å¸¸ç”¨æ–¹æ³•">æ™ºèƒ½æŒ‡é’ˆçš„å¸¸ç”¨æ–¹æ³•</h5>

<p>æ™ºèƒ½æŒ‡é’ˆçš„ç”¨æ³•ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span><span class="n">è¿™ä¸ªå…·ä½“æ˜¯å•¥æ„æ€</span><span class="err">ï¼Ÿ</span>
<span class="n">std</span><span class="p">::</span><span class="n">make_unique</span>
</code></pre></div></div>

<ul>
  <li>
    <p>\1.  make_unique åŒ unique_ptr ã€auto_ptr ç­‰ä¸€æ ·ï¼Œéƒ½æ˜¯ smart pointerï¼Œå¯ä»¥å–ä»£new å¹¶ä¸”æ— éœ€ delete pointerï¼Œæœ‰åŠ©äºä»£ç ç®¡ç†ã€‚</p>
  </li>
  <li>
    <p>\2. make_unique åˆ›å»ºå¹¶è¿”å› unique_ptr è‡³æŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹ä»å…¶æ„é€ å‡½æ•°èƒ½çœ‹å‡ºæ¥ã€‚make_uniqueç›¸è¾ƒäºunique_ptr åˆ™æ›´åŠ å®‰å…¨ã€‚</p>
  </li>
  <li>
    <p>\3. ç¼–è¯‘å™¨ä¸åŒï¼Œmake_unique è¦æ±‚æ›´æ–°ï¼ˆVisual Studio 2015ï¼‰ã€‚</p>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#include &lt;memory&gt;
</span><span class="n">std</span><span class="p">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Initializer</span><span class="o">&gt;</span> <span class="n">initializer_</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="queue-é˜Ÿåˆ—å¯¹äºæ•°æ®çš„ä¿å­˜">queue é˜Ÿåˆ—å¯¹äºæ•°æ®çš„ä¿å­˜</h5>

<p>åœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¯¹åŠ é€Ÿåº¦è®¡çš„ä¿¡å·è¿›è¡Œè¿ç®—ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">std</span><span class="p">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="p">::</span><span class="n">Vector3d</span> <span class="p">,</span> <span class="n">Eigen</span><span class="p">::</span><span class="n">aligned_allocator</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="p">::</span><span class="n">Vector3d</span><span class="o">&gt;&gt;</span> <span class="n">acc_buffer_</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h5>

<p>æ„é€ å‡½æ•°ç­‰äº<a href="https://blog.csdn.net/weixin_38339025/article/details/89161324">default</a>ï¼Ÿ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Initializer</span><span class="p">()</span> <span class="o">=</span> <span class="n">default</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="å¤´æ–‡ä»¶ä¸­çš„å®šä¹‰">å¤´æ–‡ä»¶ä¸­çš„å®šä¹‰</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#pragme once
</span></code></pre></div></div>

<p>aligned_allocator:å†…å­˜åˆ†é…å™¨</p>

<h5 id="é…ç½®æ–‡ä»¶å†™å…¥åˆ°ç±»ä¸­">é…ç½®æ–‡ä»¶å†™å…¥åˆ°ç±»ä¸­</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">struct</span> <span class="n">Config</span> <span class="p">{</span>
        <span class="n">size_t</span> <span class="n">acc_buffer_size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="n">double</span> <span class="n">max_acc_std</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="n">const</span> <span class="n">Config</span> <span class="n">config_</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="æŠ¥é”™åˆ†æ">æŠ¥é”™åˆ†æ</h5>

<p>: error: multiple types in one declaration };</p>

<p>å‡ºç°äº†æ®µé”™è¯¯ï¼šç»“æœå‘ç°æ˜¯åœ¨ç±»ä¸­è°ƒç”¨æ™ºèƒ½æŒ‡é’ˆçš„æ—¶å€™ï¼Œæ²¡æœ‰åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œåˆå§‹åŒ–å¯¼è‡´çš„é—®é¢˜ã€‚</p>

<p>which is of non-class type</p>

<p>ä¸»å‡½æ•°å£°æ˜ç±»çš„æ—¶å€™å¤šåŠ äº†ä¸€ä¸ªæ‹¬å·ï¼šï¼ˆå¦‚æœæ„é€ å‡½æ•°ä¸éœ€è¦å‚æ•°ï¼Œå†™æˆä¸‹é¢çš„å°±è¡Œäº†ï¼‰</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">OriEst</span><span class="p">::</span><span class="n">MahonyAHRSupdate</span> <span class="n">mahonyAHRS</span>
</code></pre></div></div>

<h4 id="imuä¸gpsä¿¡æ¯èåˆcé¡¹ç›®çš„å®ç°">IMUä¸GPSä¿¡æ¯èåˆC++é¡¹ç›®çš„å®ç°</h4>

<p>ENUç¬›å¡å°”åæ ‡ç³»ï¼šå°†GPSçš„WGS84åæ ‡ï¼ˆå¤§åœ°åæ ‡ç³»ï¼‰è½¬æ¢ä¸ºå¹³é¢åæ ‡ï¼ˆç¬›å¡å°”åæ ‡ç³»ï¼‰<a href="http://www.tansoo.cn/?p=896">çš„æ–¹æ³•</a>ã€‚é‚£ä¹ˆæ‰€è°“çš„ç¬›å¡å°”åæ ‡ç³»å°±æ˜¯æˆ‘ä»¬é€šå¸¸è®¤ä¸ºçš„å‚è€ƒåæ ‡ç³»ã€‚</p>

:ET